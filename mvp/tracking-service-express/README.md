# Tracking Service Express

Сервис для отслеживания оборудования с интеграцией блокчейн на Express.js.

## Возможности

- Регистрация и управление оборудованием
- Отслеживание передач оборудования между сотрудниками
- Интеграция с блокчейном Ethereum для надежного хранения истории передач
- RESTful API для взаимодействия с другими сервисами

## Установка и запуск

### Предварительные требования

- Node.js v14+
- MongoDB
- Ethereum-совместимая сеть (опционально)

### Установка

1. Клонировать репозиторий
2. Установить зависимости:
   ```
   npm install
   ```
3. Создать файл `.env` на основе `.env.example`
4. Запустить сервис:
   ```
   npm start
   ```
   Или в режиме разработки:
   ```
   npm run dev
   ```

## API

Сервис предоставляет API для управления оборудованием и его передачами:

### Регистрация и управление оборудованием

- `POST /equipment` - Регистрация нового оборудования
- `GET /equipment/:id` - Получение информации об оборудовании
- `GET /equipment` - Список оборудования (с фильтрацией)
- `PUT /equipment/:id` - Обновление информации об оборудовании
- `DELETE /equipment/:id` - Удаление оборудования

### Передача оборудования

- `POST /transfer` - Передача оборудования
- `GET /transfer/history/:equipment_id` - История передач оборудования

### Блокчейн-интеграция

- `GET /blockchain/history/:equipment_id` - История передач оборудования из блокчейна
- `POST /blockchain/register` - Регистрация существующего оборудования в блокчейне

### Статус сервиса

- `GET /ping` - Проверка доступности сервиса
- `GET /operations/recent` - Получение последних операций

## Интеграция с блокчейном

Для использования блокчейн-интеграции необходимо:

1. Развернуть смарт-контракт `EquipmentTracking.sol` в сети Ethereum
2. Положить ABI контракта в директорию `/contracts`
3. Указать адрес контракта и приватный ключ в `.env`

## Структура проекта

```
tracking-service-express/
├── config/                  # Конфигурационные файлы
│   ├── db.js                # Настройки подключения к MongoDB
│   └── blockchain.js        # Настройки подключения к Ethereum
├── controllers/             # Контроллеры для обработки запросов
├── middleware/              # Middlewares для Express
├── models/                  # Mongoose модели
├── routes/                  # Маршруты API
├── services/                # Бизнес-логика
├── utils/                   # Утилиты
├── contracts/               # Папка для ABI и контрактов Ethereum
├── app.js                   # Основной файл приложения
├── server.js                # Файл для запуска сервера
└── package.json             # Зависимости и скрипты
```
